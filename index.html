<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maniquí Interactivo</title>
    <style>
        /* Estilos básicos */
        #maniqui-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            height: auto;
            margin: 0 auto;
            border: 1px solid #ccc;
        }
        .layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: auto;
            display: none;
        }
        .layer.active {
            display: block;
        }
        #botones-container {
            text-align: left;
            margin: 20px auto;
            width: fit-content;
        }
        .boton-capa {
            display: block;
            margin: 5px 0;
            padding: 10px;
            cursor: pointer;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
</head>
<body>
    <h1>Maniquí Interactivo</h1>
    <div id="maniqui-container">
        <img src="https://images.uesp.net/a/a0/LG-card-Blood_Dragon.png" alt="Maniquí Base" class="layer active" id="maniqui-base">
        <img src="https://drive.google.com/file/d/10Szy63wbfssIrxevWUJvAtdETsxoBEPf/view?usp=drivesdk" alt="Ropa 1" class="layer">
        <img src="URL_DE_LA_PRENDA_2" alt="Ropa 2" class="layer">
        <!-- Añade más capas según sea necesario -->
    </div>
    <div id="botones-container">
        <label>
            <input type="checkbox" class="boton-capa" value="URL_DE_LA_PRENDA_1"> Prenda 1
        </label>
        <label>
            <input type="checkbox" class="boton-capa" value="URL_DE_LA_PRENDA_2"> Prenda 2
        </label>
        <!-- Añade más botones según sea necesario -->
    </div>
    <button onclick="guardarImagen()">Guardar Imagen</button>
    <script>
        document.querySelectorAll('.boton-capa').forEach(boton => {
            boton.addEventListener('change', (event) => {
                const imagenSrc = event.target.value;
                const capa = document.querySelector(`img[src="${imagenSrc}"]`);
                capa.classList.toggle('active', event.target.checked);
            });
        });

        function guardarImagen() {
            const contenedor = document.getElementById('maniqui-container');
            const maniquiBase = document.getElementById('maniqui-base');

            html2canvas(contenedor, {
                scale: maniquiBase.naturalWidth / maniquiBase.width,
                useCORS: true
            }).then(canvas => {
                const enlace = document.createElement('a');
                enlace.href = canvas.toDataURL('image/png');
                enlace.download = 'maniqui.png';
                enlace.click();
            });
        }
    </script>
</body>
</html>
